<template>
<div class="page" data-name="login">



<div class="login">
    <h1>Log ind</h1>
    <hr/>
    <div id="errorcenter" style="display: none">
        <div id="errorbox" class="alert alert-danger"></div>
    </div>

    <form>
        <input id="username" type="text" name="u" placeholder="Brugernavn" required="required" />
        <input id="password" type="password" name="p" placeholder="Adgangskode" required="required" />
        <ul class="button-content">
            <li>
                <a><button @click="guestLogin" class="btn btn-primary btn-block no-ripple">GÃ¦st</button></a>
            </li>
            <li>
                <a><button @click="userLogin" class="btn btn-primary btn-block no-ripple">Log ind</button></a>
            </li>
        </ul>
    </form>
</div>

</template>


</div>

<script>
    return {
    // Component Methods
        methods: {
            userLogin: function () {
                let username = document.getElementById('username').value;
                let password = document.getElementById('password').value;
                

                axios({
                    method: 'get',
                    url: `http://10.11.4.136/cordova/functions/verifyLogin.php?uname=${username}&pword=${password}`,
                    responseType: 'json'
                }).then((response) =>{
                    userID = response.data.user[0].ID;
                    userGruppe = response.data.user[0].usergruppe;
                    rigtignavn = response.data.user[0].name;
                    if(userID == -1){
                        document.getElementById('errorcenter').style.display = "block";
                        document.getElementById('errorbox').innerHTML = "Bruger ikke fundet."
                    }else if(userID == -2){
                        document.getElementById('errorcenter').style.display = "block";
                        document.getElementById('errorbox').innerHTML = "Adgangskoden er forkert."
                    }else{
                        console.log("Ja tak");
                        app.data['user'] = true;
                        app.data['username'] = username;
                        app.data['rigtignavn'] = rigtignavn;
                        app.methods.refreshNavbar();
                    }
                });
            },
            guestLogin: function () {
                console.log("GUEST");
            },
        },
    }
</script>